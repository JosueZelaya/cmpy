<script type="text/ng-template" id="categoriasAu.html">
  <a>
      <span ng-bind-html="match.label | uibTypeaheadHighlight:query"></span>
  </a>
</script>

<script type="text/ng-template" id="venderModal.html">
<div class="modal-body" ng-app="cmpy.anuncios" flow-init="{target: '/uploadImg'}" ng-controller="venderController">
    <div class="alert alert-warning" role="alert">
       Si tienes dudas puesdes ver el video de ayuda <a href="https://youtu.be/cmfOtIizd70" target="_blank">Click aqui para ver video</a>
    </div>
    <div ng-class="valtitulo">
        <label for="titulo" class="control-label">Agregue el nombre del producto</label>
        <input ng-model="titulo" ng-change="esValidoTitulo()" path="titulo" id="titulo" type="text" name="titulo" class="form-control" placeholder="Nombre del producto" />
    </div> 
    <br/>    
    <div class="form-group" ng-class="valcat">
        <label class="control-label">Categoria</label>
        <input type="text" ng-model="categoriaSelected" ng-blur="esValidoCat()" ng-change= "esValidoCat()"
        placeholder="Selecciones una categoria" 
        uib-typeahead="cat as cat.name for cat in categoriasAu | filter:{name:$viewValue} | limitTo:20" 
        typeahead-template-url="categoriasAu.html" class="form-control" 
        typeahead-show-hint="true" typeahead-min-length="2"/>
    </div>
    <br/>
    <div ng-class="valprecio">
        <label for="precio" class="control-label">Precio del Producto</label>
        <input ng-model="precio" ng-change="esValidoPrecio()" name="precio" type="number" min="0" max="10000000" id="precio" class="form-control" >
    </div>
    <br/>
    <div ng-class="valdes">
        <label for="descripcion" class="control-label">Describa el producto a vender</label>
        <textarea ng-model="descripcion" ng-change="esValidoDes()" path="descripcion" id="descripcion" name="descripcion" class="form-control" rows="3" placeholder="Agrege una descripcion de su producto"></textarea>                                            
    </div>
    <br/>                
    <!--    <div class="form-group">
            <input path="multipleFiles" ng-class="valimg" id="imagenes" name="multipleFiles" type="file" class="file" multiple=true data-preview-file-type="any"/>
        </div>                    -->

    <h3>
        <a name="gallery-example" class="anchor" href="#gallery-example"><span class="octicon octicon-link"></span></a>Suba imagenes de su producto</h3>
        
    <div flow-object="existingFlowObject"
        flow-files-submitted="$flow.upload()"
        flow-file-added="!!{png:1,gif:1,jpg:1,jpeg:1}[$file.getExtension()]">
        <div class="drop" 
            flow-drop 
            flow-drag-enter="style={border:'4px dashed green'}" 
            flow-drag-leave="style={}"
            ng-style="style"
            ng-class="dropClass">
            <span class="btn btn-default" flow-btn>Buscar Imagenes</span>                        
            <b>O</b>
            Arrastre y suelte sus imágenes aquí.
        </div>

        <br/>

        <div>

            <div ng-repeat="file in $flow.files" class="gallery-box">
                <span class="title">{{file.name}}</span>
                <div class="thumbnail" ng-show="$flow.files.length">
                    <img flow-img="file" />
                </div>
                <div class="progress progress-striped" ng-class="{active: file.isUploading()}">
                    <div class="progress-bar" role="progressbar"
                         aria-valuenow="{{file.progress() * 100}}"
                         aria-valuemin="0"
                         aria-valuemax="100"
                         ng-style="{width: (file.progress() * 100) + '%'}">
                        <span class="sr-only">{{file.progress()}}% Complete</span>
                    </div>
                </div>
                <div class="btn-group">
                    <a class="btn btn-xs btn-danger" ng-click="file.cancel()">
                        Remove
                    </a>
                </div>
            </div>
            <div class="clear"></div>
        </div>

    </div>
    <div>
    
    <div>
        <div class="alert alert-danger alert-dismissible fade in" role="alert" ng-show="valimg">
            Debe subir al menos una imagen
        </div>
        <div class="alert alert-danger alert-dismissible fade in" role="alert" ng-show="valubi">
            Debe seleccionar una ubicacion
        </div>
        <div class="alert alert-danger alert-dismissible fade in" role="alert" ng-show="valglobal">
            Complete la informacion
        </div>
    </div>
        
<div>
                        
                        <button value="VenderYa!" type="submit" class="btn btn-success pull-right" ng-click="open('ubicacionesModal.html', 'lg')" uib-tooltip="Ubicaciones en las que usted puede entregar el producto" tooltip-placement="bottom">
                            Agregar Ubicaciones de Entrega
                        </button>  
                        
                    </div>
    </div>

    <div class="modal-footer">                
        <button class="btn btn-warning" type="button" ng-click="cancel()">Cancelar</button>
        <button ng-disabled="!ready" value="VenderYa!" ng-click="agregarPublicacion()" class="btn btn-success pull-right">
            VenderYa!
        </button>
    </div>                



</div>


</script>
